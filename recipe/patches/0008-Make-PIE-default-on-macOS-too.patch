From cb9e433e7f27a6928c5cabf10f45e01c9c5533d9 Mon Sep 17 00:00:00 2001
From: Isuru Fernando <isuruf@gmail.com>
Date: Thu, 28 Dec 2023 19:32:19 +0530
Subject: [PATCH 08/10] Make PIE default on macOS too.

This is the default for Linux from LLVM-15
---
 clang/lib/Driver/ToolChains/Darwin.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/clang/lib/Driver/ToolChains/Darwin.cpp b/clang/lib/Driver/ToolChains/Darwin.cpp
index 39b54210dcab..ca0b85c6b960 100644
--- a/clang/lib/Driver/ToolChains/Darwin.cpp
+++ b/clang/lib/Driver/ToolChains/Darwin.cpp
@@ -3089,7 +3089,7 @@ bool Darwin::SupportsEmbeddedBitcode() const {
 
 bool MachO::isPICDefault() const { return true; }
 
-bool MachO::isPIEDefault(const llvm::opt::ArgList &Args) const { return false; }
+bool MachO::isPIEDefault(const llvm::opt::ArgList &Args) const { return true; }
 
 bool MachO::isPICDefaultForced() const {
   return (getArch() == llvm::Triple::x86_64 ||
